<!DOCTYPE html>
<html>
<head>
	<title>Canvas</title>
	<style type="text/css">
		canvas{
			background-color: gray;
		}
	</style>
</head>
<body>
	<img id="cosa" src="23.png" style="display:none;">
	<canvas id="canvas" width="400" height="300"></canvas>
	<script type="text/javascript">
		var canvas = null, ctx = null, x=0, y=0, direccion = 0;

		window.requestAnimationFrame = (function()
		{
			return window.requestAnimationFrame || 
				window.mozRequestAnimationFrame ||
				window.webkitRequestAnimationFrame ||
				function (callback)
				{
					window.setTimeout(callback,17);
				}
		}());
		function paint(ctx)
		{
			ctx.fillStyle = "#fff";
			ctx.fillRect(0,0,canvas.width,canvas.height);
			ctx.fillStyle="red";
			ctx.fillRect(x,y,10,10);
		}
		function upt()
		{
			// x += 2;
			// if(x>canvas.width){
			// 	x = -10;
			// }
			//x -= 2;
			//if (x<0) {
			//	x = canvas.width;
			//}
			// y += 2;
			// if(y>=canvas.height){
			// 	y = -10;
			// }
			// y -=2;
			// if(y<0){
			// 	y = canvas.height;
			// }

			switch(direccion)
			{
				case 0:
					x += 2;
					if(x>canvas.width)
					 	x = -10;
				break;
				case 1:
					x -= 2;
					if (x<0)
						x = canvas.width;
				break;
				case 2:
					y += 2;
					if(y>=canvas.height)
					 	y = -10;
				break;
				case 3:
					y -=2;
					if(y<0)
					 	y = canvas.height;
				break;
			}
		}

		//se repite mucho
		function run()
		{
			window.requestAnimationFrame(run)
			upt();
			paint(ctx);
		}

		function init()
		{
			canvas = document.getElementById('canvas');
			ctx = canvas.getContext('2d');
			run();
		}

		window.addEventListener('load',init,false);  

		document.addEventListener('keydown', (e) => 
		{
		  const keyName = event.key;

		  if(keyName == "ArrowUp")
		  {
		  	direccion = 3;
		  }
		  else if(keyName == "ArrowDown")
		  {
		  	direccion = 2;
		  }
		  else if(keyName == "ArrowLeft")
		  {
		  	direccion = 1;
		  }
		  else if(keyName == "ArrowRight")
		  {
		  	direccion = 0;
		  }

		});
	</script>
</body>
	
</html>
